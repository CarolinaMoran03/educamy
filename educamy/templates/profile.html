{% extends "layout.html" %}
{% load static %}
{% load tailwind_filters %}

{% block dashboardContent %}
    <div class="p-4">
    <h1 class="font-bold text-2xl">Perfil de {{ user.username }}</h1>

    <div class="mt-4 w-full grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
      {% comment %}Cajas Resumen Dashboard{% endcomment %}
        <div
        class="border-1 border-gray-300 rounded-lg p-4 bg-white shadow-md flex flex-col items-start justify-center w-full">
        <div class="flex justify-between w-full">
            <h3 class="text-sm font-semibold">Total itinerarios</h3>
            <svg class="text-purple-900" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-file-spreadsheet-icon lucide-file-spreadsheet">
                <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" />
                <path d="M14 2v4a2 2 0 0 0 2 2h4" />
                <path d="M8 13h2" />
                <path d="M14 13h2" />
                <path d="M8 17h2" />
                <path d="M14 17h2" />
            </svg>
        </div>
        <h4 class="font-bold text-2xl">
            {{ itinerariesCount }}
            0
        </h4>

        <p class="text-xs opacity-75">Número de itinearios generados</p>
    </div>
    {% comment %} Asignaturas {% endcomment %}
    <div
        class="border-1 border-gray-300 rounded-lg p-4 bg-white shadow-md flex flex-col items-start justify-center w-full">
        <div class="flex justify-between w-full">
            <h3 class="text-sm font-semibold">Diapositivas</h3>
            <svg class="text-orange-800" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-book-open-icon lucide-book-open">
                <path d="M12 7v14" />
                <path
                    d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z" />
            </svg>
        </div>
        <h4 class="font-bold text-2xl">
            0
        </h4>
        <p class="text-xs opacity-75">Número de diapostivas generadas</p>
    </div>
      

    {% comment %}Profile{% endcomment %}
    

      <div class="p-4">
    <h1 class="font-bold text-2xl">Perfil de {{ user.username }}</h1>

    <div class="mt-8">
      <h2 class="font-bold text-2xl mb-4">Cuenta</h2>

      <!-- Imagen de perfil -->
      <div class="flex justify-center mb-6">
        {% if user_photo %}
          <img class="w-[200px] h-[200px] object-cover rounded-full shadow-md" src="{{ user_photo }}" alt="user-profile" />
        {% else %}
          <img class="w-[200px] h-[200px] object-contain rounded-full shadow-md" src="{% static 'img/avatar.jpg' %}" alt="Foto de perfil por defecto" />
        {% endif %}
      </div>

      <!-- Formulario -->
      <div class="max-w-[800px] mx-auto flex justify-center items-center">
                <form method="POST" enctype="multipart/form-data" class="w-full space-y-4">
                  {% csrf_token %}

                  {{ form.username|as_crispy_field }}
                  {{ form.email|as_crispy_field }}
                  {{ form.first_name|as_crispy_field }}
                  {{ form.last_name|as_crispy_field }}

                  <div class="flex justify-between items-center w-full mb-4">
          <label for="id_photo" class="cursor-pointer flex items-center space-x-4 group">
            <!-- Texto a la izquierda -->
            <span class="text-sm text-purple-800 font-medium group-hover:text-purple-900 transition">Foto de perfil (jpg, png)</span>

            <!-- Ícono a la derecha con tamaño 55x55 -->
            <svg xmlns="http://www.w3.org/2000/svg" width="55" height="55" viewBox="0,0,256,256" fill="#b61fba" class="group-hover:scale-105 transition-transform duration-150 ease-in-out">
              <g fill="#b61fba" fill-rule="nonzero" stroke="none">
                <g transform="scale(10.66667,10.66667)">
                  <path d="M6,3c-1.654,0 -3,1.346 -3,3v12c0,1.654 1.346,3 3,3h12c1.654,0 3,-1.346 3,-3v-12c0,-1.654 -1.346,-3 -3,-3zM10.26758,8h3.46484c0.167,0 0.32301,0.08366 0.41602,0.22266l0.35156,0.77734h1.5c0.552,0 1,0.448 1,1v5c0,0.552 -0.448,1 -1,1h-8c-0.552,0 -1,-0.448 -1,-1v-5c0,-0.552 0.448,-1 1,-1c0,-0.276 0.224,-0.5 0.5,-0.5c0.276,0 0.5,0.224 0.5,0.5h0.5l0.35156,-0.77734c0.092,-0.139 0.24802,-0.22266 0.41602,-0.22266zM12,10c-1.379,0 -2.5,1.121 -2.5,2.5c0,1.379 1.121,2.5 2.5,2.5c1.379,0 2.5,-1.121 2.5,-2.5c0,-1.379 -1.121,-2.5 -2.5,-2.5zM15.5,10c-0.27614,0 -0.5,0.22386 -0.5,0.5c0,0.27614 0.22386,0.5 0.5,0.5c0.27614,0 0.5,-0.22386 0.5,-0.5c0,-0.27614 -0.22386,-0.5 -0.5,-0.5zM12,11c0.827,0 1.5,0.673 1.5,1.5c0,0.827 -0.673,1.5 -1.5,1.5c-0.827,0 -1.5,-0.673 -1.5,-1.5c0,-0.827 0.673,-1.5 1.5,-1.5z"></path>
                </g>
              </g>
            </svg>
          </label>

          <!-- Input oculto para subir foto -->
          <input
            type="file"
            name="photo"
            id="id_photo"
            accept=".jpg, .jpeg, .png"
            class="hidden"
          />
        </div>

          <!-- Cambiar contraseña -->
          <a href="{% url 'educamy:change_password' %}" class="text-purple-900 font-semibold inline-block">
            Cambiar contraseña
          </a>

          <!-- Botón guardar -->
          <button type="submit" class="w-full bg-purple-900 text-white p-4 rounded-md mt-4">Guardar</button>
        </form>
      </div>
    </div>
  </div>

{% endblock dashboardContent %}



